@using LocadoraDeVeiculos.WebApp.Models
@using Microsoft.AspNetCore.Mvc.TagHelpers
@{
    string caminho = Context.Request.Path;

    var grupoAutomoveisAtivo = caminho.StartsWith("/grupoAutomoveis") ? "nav-link active fw-semibold" : "nav-link";

    MensagemViewModel? mensagem = ViewBag.Mensagem ?? null;
}﻿
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewBag.Title - Locadora De Veiculos</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/LocadoraDeVeiculos.WebApp.styles.css" asp-append-version="true" />
</head>
<body class="d-flex flex-column min-vh-100">
    <nav class="navbar navbar-expand-lg">
        <div class="container my-3">
            <a class="navbar-brand fs-3 fw-semibold text-primary" href="/">Locadora de Veículos</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav d-lg-flex justify-content-end gap-3 w-100">
                    @if (User.IsInRole("Empresa"))
                    {
                        <a class="px-4 @grupoAutomoveisAtivo" href="/grupoAutomoveis/listar">Grupo de Automóveis</a>
                    }
                </div>

                @if (User.Identity is not null && User.Identity.IsAuthenticated)
                {
                    <form asp-controller="Usuario" asp-action="Logout" class="d-grid d-lg-flex justify-content-lg-end gap-1 w-100">
                        <a href="#" class="btn btn-outline-primary px-5">
                            <i class="bi bi-person-vcard-fill"></i>
                            @User.Identity.Name
                        </a>

                        <button class="btn btn-primary px-3">
                            <i class="bi bi-box-arrow-right"></i>
                            Logout
                        </button>
                    </form>
                }
                else
                {
                    <div class="col-md-3 text-end">
                        <a asp-controller="Usuario" asp-action="Login" class="btn btn-outline-primary me-2 px-4">Login</a>
                        <a asp-controller="Usuario" asp-action="Registrar" class="btn btn-outline-primary px-4">Registro</a>
                    </div>

                }
            </div>
        </div>
    </nav>

    <main class="container mt-4">
        <div class="row px-2">
            <h1 class="text-light-emphasis">@ViewBag.Title</h1>
            <hr />
            <partial name="_Mensagem" model="mensagem"></partial>
            @RenderBody()
        </div>
    </main>

    <footer class="border-top text-center mt-auto">
        <p class="my-3">&copy; - 2024 - Locadora de Veículos 1.0</p>
    </footer>

    <script src="~/js/bootstrap.bundle.min.js"></script>
</body>
</html>